<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <title>Game</title>
    </head>

    <style type="text/css">
    html, body {
      margin: 0;
      height: 100%;
      overflow: hidden
    }
    
    * {
        padding: 0 auto;
        margin: 0 auto;
    }
    
    /* border 제거 */
    body {
        border: 0;
        background-color: white;
    }
    
    /* canvas를 viewport 크기로 만들기 */
    canvas {
        overflow: hidden;
        position: fixed;
        display: block;
    }
    </style>
    
    <body>
        <canvas id="canvas"></canvas>
    </body>

    <!-- script src="/socket.io-client/dist/socket.io.js" -->
    <script type="text/javascript" src="https://rhea-so.github.io/Artist/product/artist.js"></script>
    
    <script>
    const canvas = document.getElementById('canvas');
    
    try {
    set_canvas(canvas);
    set_fullscreen(true);
    set_debug_mode(false);
    
    start();
    
    class MousePointer extends ArtistElement {
      draw() {
        draw_set_alpha(0.6);
        draw_circle(window.variables.mouse_x, window.variables.mouse_y, 3, true);
        draw_line(0, window.variables.mouse_y, window.variables.display_width, window.variables.mouse_y);
        draw_line(window.variables.mouse_x, 0, window.variables.mouse_x, window.variables.display_height);
        draw_set_alpha(1);
      }
    }
    
    class Base extends ArtistElement {
      draw() {
        draw_set_alpha(0.3);
        draw_circle(window.variables.display_width / 2, window.variables.display_height / 2, 5, true);
        draw_line(0, window.variables.display_height / 2 , window.variables.display_width, window.variables.display_height / 2);
        draw_line(window.variables.display_width / 2, 0, window.variables.display_width / 2, window.variables.display_height);
        draw_set_alpha(1);
      }
    }
    
    class Machine extends ArtistElement {
      create() {
        this.angle = 0;
      }
      
      update() {
        this.angle = point_direction(window.variables.display_width / 2, window.variables.display_height / 2, window.variables.mouse_x, window.variables.mouse_y);
        this.dist = point_distance(window.variables.display_width / 2, window.variables.display_height / 2, window.variables.mouse_x, window.variables.mouse_y);
      }
      
      draw() {
        draw_set_color(color.red);
        draw_line(window.variables.display_width / 2, window.variables.display_height / 2, window.variables.mouse_x, window.variables.mouse_y);
        draw_set_font(25, 'Arial');
        draw_text(window.variables.display_width / 2 + 7, window.variables.display_height / 2 + 12, String(Math.round(this.angle)) + ' degree.');
        draw_circle(
          window.variables.display_width / 2 + lengthdir_x(this.dist, this.angle),
          window.variables.display_height / 2 + lengthdir_y(this.dist, this.angle),
          5,
          true
        )
        
        draw_set_font(50, 'Arial');
        draw_text_transformed(window.variables.display_width / 2 - 150, window.variables.display_height / 2 + 200, 'Text Angle', 'center', this.angle);
        draw_set_color(color.black);
      }
    }
    
    instance_create(MousePointer, 0, 0, 1);
    instance_create(Base, 0, 0, 1);
    instance_create(Machine, 0, 0, 1);
    
    } catch(err) {
      alert(err);
    }
    </script>
</html>
